# 🛠️ Terraform SOP: Using Variables (`variables.tf`) 💻☁️

## 🎯 **Goal**

Make your Terraform code **flexible, reusable, and organized** using input variables for your resources.

✅ You’ll learn to define variables for:

* **Instance Type** 🖥️
* **Region** 🌎
* **Tags** 🏷️

---

## 1️⃣ **What are Variables?**

| Emoji | Concept     | Explanation                                                                             |
| ----- | ----------- | --------------------------------------------------------------------------------------- |
| 🏷️   | Placeholder | A variable is a **placeholder** in your code for a value you can change.                |
| 🔄    | Reusable    | Same Terraform code can be reused for **different projects, environments, or regions**. |
| ⚡     | Flexible    | Change values **without editing the main resource code**.                               |
| 🔒    | Secure      | Mark sensitive variables (like passwords) to **hide them from logs**.                   |

---

## 2️⃣ **Variable Types**

Terraform supports several **variable types**, which help **validate the value**:

| Type     | Example                                 | Notes                                       |
| -------- | --------------------------------------- | ------------------------------------------- |
| `string` | `"t2.micro"`                            | Text value, like instance type or name      |
| `number` | `2`                                     | Numeric values, e.g., number of instances   |
| `bool`   | `true` or `false`                       | For on/off flags, e.g., `enable_monitoring` |
| `list`   | `["subnet-1","subnet-2"]`               | Ordered list of values                      |
| `map`    | `{ Environment="dev", Project="demo" }` | Key-value pairs, useful for tags            |

---

## 3️⃣ **Required vs Optional Variables**

| Type     | Example                                             | Notes                                                    |
| -------- | --------------------------------------------------- | -------------------------------------------------------- |
| Optional | `variable "instance_type" { default = "t2.micro" }` | If no value is passed, **Terraform uses the default**    |
| Required | `variable "ami_id" { type = string }`               | No default → **must provide value** via CLI or `.tfvars` |

> ⚡ **Tip:** Always provide defaults for common variables, and leave sensitive/unique ones as required.

---

## 4️⃣ **Sensitive Variables**

Sensitive variables **hide values in logs** (good for passwords, API keys, secrets):

```hcl
variable "db_password" {
  description = "Database password"
  type        = string
  sensitive   = true
}
```

✅ Terraform will **not display this value in output or logs**, improving security.

---

## 5️⃣ **Example: 3 Variables for EC2**

**variables.tf**

```hcl
# EC2 Instance Type 🖥️
variable "instance_type" {
  description = "Type of EC2 instance"
  default     = "t2.micro"
}

# AWS Region 🌎
variable "region" {
  description = "AWS region to launch resources"
  default     = "us-east-1"
}

# Tags 🏷️
variable "tags" {
  description = "Key-value tags for the EC2 instance"
  default = {
    Environment = "dev"
    Project     = "terraform-demo"
  }
}
```

**main.tf**

```hcl
resource "aws_instance" "my_ec2" {
  ami               = "ami-0c94855ba95c71c99"
  instance_type     = var.instance_type  # 🖥️
  availability_zone = var.region         # 🌎
  tags              = var.tags           # 🏷️
}
```

---

## 6️⃣ **Override Variables**

| Method               | Example                                                                                     | Notes                        |
| -------------------- | ------------------------------------------------------------------------------------------- | ---------------------------- |
| CLI                  | `terraform apply -var="instance_type=t3.small"`                                             | Quick one-time override      |
| `.tfvars` file       | `hcl instance_type="t3.small" region="us-west-2" tags={Environment="prod",Project="live"} ` | Manage multiple environments |
| Environment Variable | `export TF_VAR_instance_type="t2.large"`                                                    | Good for automation/scripts  |

---

## 7️⃣ **Practical Use Cases**

| Emoji | Use Case                | Explanation                                                                |
| ----- | ----------------------- | -------------------------------------------------------------------------- |
| 🌎    | Multi-region deployment | Use `var.region` to deploy same resources in **different AWS regions**     |
| 🖥️   | Dynamic instance sizing | Change `var.instance_type` per environment (small for dev, large for prod) |
| 🏷️   | Standardized tagging    | Keep **Environment/Project/Owner tags** consistent                         |
| 🔒    | Secure data             | Hide sensitive values like passwords or API keys                           |
| 🔁    | Reusable modules        | Pass variables to **Terraform modules** to avoid duplicating code          |

---

## 8️⃣ **Best Practices ✅**

1. Always provide **descriptions** for clarity.
2. Use **types** to prevent wrong value errors.
3. Mark **sensitive** variables when needed.
4. Use `.tfvars` or CLI overrides for **environment-specific configs**.
5. Keep your `variables.tf` **organized**: group related variables (network, instance, tags).

---

