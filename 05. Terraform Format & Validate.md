# ğŸ§¹ **SOP: Terraform Format & Validate â€” Clean, Error-Free Infrastructure Code** ğŸ§±âœ¨

---

## ğŸ¯ **Goal**

Keep Terraform configurations **clean, standardized, and error-free** before applying them to production.
Two core commands make this possible:

* `terraform fmt` â†’ Formats your code
* `terraform validate` â†’ Checks for syntax & logical errors

---

## ğŸ§  **Why It Matters**

| ğŸ”¢ | Concept              | ğŸ’¡ Importance                                                               |
| -- | -------------------- | --------------------------------------------------------------------------- |
| ğŸ§© | **Consistency**      | Ensures all Terraform files follow the same indentation and layout.         |
| âš™ï¸ | **Automation**       | Prevents messy diffs in version control (Git).                              |
| ğŸš¨ | **Error Prevention** | Detects invalid syntax or wrong references before running `terraform plan`. |
| ğŸ§± | **DevOps Practice**  | Used in CI/CD pipelines for Terraform quality checks.                       |

---

## ğŸªœ **Step-by-Step SOP**

---

### ğŸ¥‡ Step 1: Open Your Terraform Project ğŸ“‚

Navigate to your project folder:

```bash
cd terraform-project/
```

ğŸ’¡ *Make sure your `.tf` files are inside this folder (e.g., `main.tf`, `provider.tf`, etc.)*

---

### ğŸ¥ˆ Step 2: Format the Code ğŸ§¼

Run the formatting command:

```bash
terraform fmt
```

âœ… **What it does:**

* Aligns `=` signs
* Fixes indentation
* Normalizes spacing
* Formats nested blocks

Example:
Before ğŸ‘‡

```hcl
resource "aws_instance" "myec2"{
ami="ami-0dee22c13ea7a9a67"
instance_type= "t2.micro"}
```

After running `terraform fmt` ğŸ‘‡

```hcl
resource "aws_instance" "myec2" {
  ami           = "ami-0dee22c13ea7a9a67"
  instance_type = "t2.micro"
}
```

ğŸ’¡ **Use Case:**
Ensures consistency across your team â€” same formatting style, no confusion in Git diffs.

---

### ğŸ¥‰ Step 3: Validate Configuration âœ…

Run:

```bash
terraform validate
```

âœ… **What it does:**

* Checks for **syntax errors**
* Detects **wrong variable references**
* Validates **provider and resource configuration**

Example output:

```
Success! The configuration is valid.
```

If there's an issue, you might see:

```
Error: Missing required argument
```

ğŸ’¡ **Use Case:**
Validates logic before running costly `terraform apply`.

---

### ğŸ§  Step 4: Combine Both in CI/CD Pipelines ğŸ§°

You can automate both checks before deployment:

```bash
terraform fmt -check
terraform validate
```

ğŸ’¡ **Best Practice:**
Add these steps in Jenkins, GitHub Actions, or GitLab CI pipelines to fail early if syntax or format is wrong.

---

### ğŸ§¾ Step 5: Summary Table

| Step | Action              | Command                                       | Result / Use Case               |
| ---- | ------------------- | --------------------------------------------- | ------------------------------- |
| ğŸ¥‡   | Navigate to project | `cd terraform-project/`                       | Access working directory        |
| ğŸ¥ˆ   | Format files        | `terraform fmt`                               | Standardize code layout         |
| ğŸ¥‰   | Validate files      | `terraform validate`                          | Detect syntax or logical issues |
| ğŸ§    | CI/CD integration   | `terraform fmt -check` + `terraform validate` | Automated quality gate          |

---

### âš¡ Bonus Tip â€” Check All Files Recursively ğŸ”

To format **all Terraform files** in subdirectories:

```bash
terraform fmt -recursive
```

---

### ğŸš€ Real DevOps Use Case

When working in a **shared Git repo**, run:

```bash
terraform fmt
terraform validate
git add .
git commit -m "Formatted and validated Terraform code"
```

This ensures every commit maintains:
âœ… Clean format
âœ… Valid syntax
âœ… Team-wide consistency

---

### ğŸ”¥ Output Example

```
terraform fmt
main.tf
provider.tf
s3.tf

terraform validate
Success! The configuration is valid.
```

---

### ğŸ§© Final Thought

These two commands are small but **critical DevOps practices**.
They make Terraform projects production-ready by ensuring:
âœ… Readability
âœ… Reliability
âœ… Team consistency

---
