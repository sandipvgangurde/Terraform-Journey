# ğŸ§  **SOP: Terraform CLI Commands Deep Dive** ğŸ’»âš™ï¸

---

## ğŸ¯ **Goal**

By the end of this SOP, youâ€™ll:
âœ… Understand **all essential Terraform CLI commands**
âœ… Know **when and why** to use each
âœ… Build confidence in automation, troubleshooting & CI/CD

---

## ğŸš€ **Why This Matters**

Terraform isnâ€™t just about writing `.tf` files â€” the **CLI commands** are what bring your infrastructure to life.
Mastering them helps you:

* Automate deployments in pipelines ğŸ¤–
* Debug configuration issues ğŸ›
* Manage state and changes safely ğŸ§©

---

## ğŸ“˜ **Top Terraform CLI Commands (with Use Cases)**

| ğŸ”¢     | Command                           | ğŸ§© Description                                            | ğŸ’¡ Use Case                                            |
| ------ | --------------------------------- | --------------------------------------------------------- | ------------------------------------------------------ |
| 1ï¸âƒ£    | `terraform init`                  | Initializes Terraform in a new directory                  | Downloads provider plugins (AWS, GCP, Azure)           |
| 2ï¸âƒ£    | `terraform validate`              | Validates configuration syntax                            | Catch errors before planning                           |
| 3ï¸âƒ£    | `terraform fmt`                   | Formats Terraform code                                    | Keeps code clean and standardized                      |
| 4ï¸âƒ£    | `terraform plan`                  | Previews what Terraform will do                           | Shows what resources will be created/changed/destroyed |
| 5ï¸âƒ£    | `terraform apply`                 | Executes the plan                                         | Actually creates or updates infrastructure             |
| 6ï¸âƒ£    | `terraform destroy`               | Tears down infrastructure                                 | Clean up everything safely                             |
| 7ï¸âƒ£    | `terraform show`                  | Displays current state or plan                            | View what Terraform manages right now                  |
| 8ï¸âƒ£    | `terraform output`                | Displays output variables                                 | Useful in pipelines and module chaining                |
| 9ï¸âƒ£    | `terraform state list`            | Lists resources in the state file                         | Verify Terraform is tracking your infra correctly      |
| ğŸ”Ÿ     | `terraform state show <resource>` | Shows details of a tracked resource                       | Inspect live resource attributes                       |
| 1ï¸âƒ£1ï¸âƒ£ | `terraform refresh`               | Updates local state with real cloud state                 | Syncs Terraform with reality                           |
| 1ï¸âƒ£2ï¸âƒ£ | `terraform import`                | Brings an existing cloud resource under Terraform control | Manage manually created resources                      |
| 1ï¸âƒ£3ï¸âƒ£ | `terraform taint`                 | Marks a resource for recreation on next apply             | Force rebuild of broken resources                      |
| 1ï¸âƒ£4ï¸âƒ£ | `terraform untaint`               | Removes the taint flag                                    | Skip unnecessary recreation                            |
| 1ï¸âƒ£5ï¸âƒ£ | `terraform graph`                 | Creates dependency graph                                  | Visualize infrastructure relationships                 |
| 1ï¸âƒ£6ï¸âƒ£ | `terraform workspace`             | Manage multiple environments (dev/stage/prod)             | Switch between envs without rewriting code             |

---

## ğŸ§± **Step-by-Step Practical Demo**

---

### ğŸ¥‡ Step 1: Initialize Terraform ğŸ§°

```bash
terraform init
```

âœ… Downloads providers and sets up backend.

ğŸ’¡ *Always the first command after writing your `.tf` files.*

---

### ğŸ¥ˆ Step 2: Format & Validate ğŸ§¼âœ…

```bash
terraform fmt
terraform validate
```

âœ… Keeps code clean and free of syntax errors.
ğŸ’¡ Essential before committing to Git or running in pipelines.

---

### ğŸ¥‰ Step 3: Preview Plan ğŸ—ºï¸

```bash
terraform plan -out=tfplan.out
```

âœ… Shows what will change.
ğŸ’¡ Saves plan output to a file for later use (great for approvals).

---

### ğŸ—ï¸ Step 4: Apply Changes âš™ï¸

```bash
terraform apply tfplan.out
```

âœ… Deploys your infrastructure.
ğŸ’¡ Use `-auto-approve` for automation (CI/CD).

---

### ğŸ’£ Step 5: Destroy Resources ğŸ§¹

```bash
terraform destroy -auto-approve
```

âœ… Removes all Terraform-managed resources.
ğŸ’¡ Best practice after testing â€” saves cloud costs.

---

### ğŸ§© Step 6: Check State ğŸ—ƒï¸

```bash
terraform show
terraform state list
terraform state show aws_instance.myec2
```

âœ… Understand what Terraform currently controls.
ğŸ’¡ Helps in debugging drift or dependency issues.

---

### ğŸ”„ Step 7: Refresh State ğŸŒ

```bash
terraform refresh
```

âœ… Updates state to match the actual cloud environment.
ğŸ’¡ Useful if resources were manually changed outside Terraform.

---

### ğŸ§¬ Step 8: Workspaces (Multi-Environment Setup) ğŸŒ±

```bash
terraform workspace new dev
terraform workspace select dev
terraform workspace list
```

âœ… Manage multiple environments (dev/stage/prod) using one configuration.
ğŸ’¡ Keeps isolated state files for each environment.

---

## ğŸ§¾ **Summary Table**

| Step | Command                      | Purpose        | Use Case                 |
| ---- | ---------------------------- | -------------- | ------------------------ |
| ğŸ¥‡   | `terraform init`             | Initialize     | Setup project directory  |
| ğŸ¥ˆ   | `terraform fmt` + `validate` | Format + Check | Code hygiene             |
| ğŸ¥‰   | `terraform plan`             | Preview        | Safe deployment planning |
| ğŸ—ï¸  | `terraform apply`            | Deploy         | Execute infra changes    |
| ğŸ’£   | `terraform destroy`          | Cleanup        | Remove infra             |
| ğŸ§©   | `terraform state` cmds       | Inspect        | Debug state issues       |
| ğŸ”„   | `terraform refresh`          | Sync           | Update local state       |
| ğŸ§¬   | `terraform workspace`        | Environments   | Manage multiple setups   |

---

## âš™ï¸ **Real DevOps Use Case Example**

In a **CI/CD pipeline (e.g., GitHub Actions or Jenkins)**:

```bash
terraform fmt -check
terraform validate
terraform plan -out=tfplan.out
terraform apply -auto-approve tfplan.out
```

âœ… This ensures:

* Clean & validated code
* Controlled deployment
* Fully automated pipeline flow

---

## ğŸ”¥ **Bonus Commands**

| Command               | Description                                        |
| --------------------- | -------------------------------------------------- |
| `terraform version`   | Check installed Terraform version                  |
| `terraform providers` | List required and installed providers              |
| `terraform console`   | Interactively evaluate Terraform expressions       |
| `terraform lock`      | Manage dependency lock files for consistent builds |

---

## ğŸ§© **Output Example**

```
Terraform v1.9.5
Initializing provider plugins...
Success! Terraform has been successfully initialized!
Plan: 1 to add, 0 to change, 0 to destroy.
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
```

---

## ğŸ§  **Key Takeaways**

âœ… Learn **every CLI command** â€” these are your DevOps â€œweapons.â€
âœ… Use them regularly to **debug, automate, and deploy safely.**
âœ… Combine them in **pipelines** for powerful, hands-off infrastructure workflows.

--
